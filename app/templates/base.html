<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  {% if not use_local_assets %}
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" />
  {% endif %}
  <link rel="stylesheet" href="/static/app.css" />
  {% if use_local_assets %}
  <script src="/static/vendor/htmx.min.js" defer></script>
  {% else %}
  <script src="https://unpkg.com/htmx.org@1.9.12" defer></script>
  {% endif %}
  <title>{{ title }}</title>
</head>
<body>
  <div
    class="toast-container"
    data-toast-container
    data-timeout="4000"
    role="region"
    aria-live="polite"
    aria-label="Notifications"
  >
    {% for toast in toast_messages %}
    <div class="toast toast-{{ toast.type }}" data-timeout="4000">
      <span class="toast-message">{{ toast.message }}</span>
      <button class="toast-close" type="button" aria-label="Dismiss notification">&times;</button>
    </div>
    {% endfor %}
  </div>
{% if show_nav %}
<div class="app-shell">
  <aside class="sidebar">
    <div class="sidebar-brand">
      <div class="brand-mark">ip</div>
      <div>
        <p class="brand-title">ipocket</p>
        <p class="brand-subtitle">IP inventory</p>
      </div>
    </div>
    <nav class="sidebar-nav">
      <a class="nav-link{% if active_nav == 'management' %} nav-link-active{% endif %}" href="/ui/management">Management</a>
      <a class="nav-link{% if active_nav == 'ip-assets' %} nav-link-active{% endif %}" href="/ui/ip-assets">IP Assets</a>
      <a class="nav-link{% if active_nav == 'hosts' %} nav-link-active{% endif %}" href="/ui/hosts">Hosts</a>
      <a class="nav-link{% if active_nav == 'ranges' %} nav-link-active{% endif %}" href="/ui/ranges">Ranges</a>
      <a class="nav-link{% if active_nav == 'library' %} nav-link-active{% endif %}" href="/ui/projects">Library</a>
      <a class="nav-link{% if active_nav == 'connectors' %} nav-link-active{% endif %}" href="/ui/connectors">Connectors</a>
      <a class="nav-link{% if active_nav == 'audit-log' %} nav-link-active{% endif %}" href="/ui/audit-log">Audit Log</a>
      <a class="nav-link{% if active_nav == 'data-ops' %} nav-link-active{% endif %}" href="/ui/import">Data Ops</a>
      {% if is_superuser %}
      <a class="nav-link{% if active_nav == 'users' %} nav-link-active{% endif %}" href="/ui/users">Users</a>
      {% endif %}
    </nav>
    <div class="sidebar-footer">
      <div class="sidebar-account">
        <p class="sidebar-section-title">Account</p>
        {% if is_authenticated %}
        <form method="post" action="/ui/logout">
          <button type="submit" class="nav-link sidebar-logout-button">Logout</button>
        </form>
        {% else %}
        <a class="nav-link sidebar-login-link" href="/ui/login">Login</a>
        {% endif %}
      </div>
      {% if build_info %}
      <p class="sidebar-note">ipocket v{{ build_info.version }} ({{ build_info.commit }}) • built {{ build_info.build_time }} · <a href="/ui/about">About</a></p>
      {% endif %}
    </div>
  </aside>
  <div class="app-main">
    <main class="content">
{% endif %}
      {% block content %}{% endblock %}
{% if show_nav %}
    </main>
  </div>
</div>
{% endif %}
<script src="/static/toast.js" defer></script>
<script src="/static/js/tag-picker.js" defer></script>
</body>
</html>
